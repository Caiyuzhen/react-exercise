import "./App.css"
import React from 'react'
//1.ä» react ä¸­å¯¼å…¥ useState,useEffect å‡½æ•°
import { useState,useEffect } from 'react'


//ğŸš€ Hook - useLocalStorage ğŸ”¥

  //What?
    //å½“ message è¢«ä¿®æ”¹æ—¶ï¼Œè‡ªåŠ¨çš„ä¿å­˜æ•°æ®åˆ°æœ¬åœ°

  //How?
    //1.å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ã€é”®ã€‘ï¼Œä¸€ä¸ªæ˜¯ã€é»˜è®¤å€¼ã€‘
    //2.ç”¨ useState è®©å‡½æ•°å˜æˆå¯ä»¥é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥è®¾ç½®æ•°æ®çš„å‡½æ•°
    //3.æ¯æ¬¡åªè¦ä¿®æ”¹ message æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨çš„å‘æœ¬åœ°åŒæ­¥ä¸€ä»½æ•°æ®è¿›è¡Œä¿å­˜



//â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”



function useLocalStorage (key,defaultValue){ //1.å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ã€é”®ã€‘ï¼Œä¸€ä¸ªæ˜¯ã€é»˜è®¤å€¼ã€‘

  //ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥å‰ä¸€ä¸ªæ˜¯ç”¨ã€ message ã€‘æ¥åšã€é»˜è®¤å€¼ã€‘çš„æ–°å€¼(ğŸ”¥ğŸ”¥ç›¸å½“äºè®© defaultValue = message) ï¼ŒsetMessage åˆ™æ˜¯ä¿®æ”¹ message çš„æ–¹æ³•
  const [message,changeMessage] = useState(defaultValue)//2.ç”¨ useState æ¥è§£æ„å‡½æ•°ï¼Œä½¿å…¶å˜æˆå¯ä»¥é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥è®¾ç½®æ•°æ®çš„å‡½æ•°


  //ğŸ‘‡ç›¸å½“äºå˜æˆç›‘å¬ defaultValueï¼Œåªè¦ defaultValue æœ‰æ”¹å˜å°±ä¼šè‡ªåŠ¨ä¿å­˜æ•°æ®åˆ°æœ¬åœ°
  useEffect(()=>{
    //ğŸ”¥3.æ¯æ¬¡åªè¦ä¿®æ”¹ message æ•°æ®çš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨çš„å‘æœ¬åœ°åŒæ­¥ä¸€ä»½æ•°æ®è¿›è¡Œä¿å­˜
    window.localStorage.setItem(key,message) //è¯­æ³•ï¼šstorage.setItem(keyName, keyValue);
  },[key,message]) //A æˆ– B ä¿®æ”¹äº†éƒ½æ»¡è¶³

  return [message,changeMessage] //ğŸ”¥ğŸ”¥ğŸ”¥è¿”å›æ­¤æ–¹æ³•ï¼Œå¯ä»¥ç”¨ setMessage æ¥ä¿®æ”¹ message çš„æ•°æ®ï¼Œå¹¶ä¸”åªè¦æ•°æ®ä¿®æ”¹äº†å°±ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°
  
}




function APP () {

  //2.ğŸ‘‡ğŸ‘‡ğŸ”¥ğŸ”¥ç›¸å½“äºè°ƒç”¨äº†ã€ useLocalStorage å¹¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°(ç›¸å½“äºå®šä¹‰åˆå§‹å€¼)ã€‘ï¼ŒğŸ”¥ğŸ”¥å¹¶ä¸”è¿›è¡Œäº†è§£æ„èµ‹å€¼
  const[message,changeMessage] = useLocalStorage('hook-key-1','åŠ è²çŒ«') 


  setTimeout(()=>{
    changeMessage('è“ç™½çŒ«')
  },3000)// 3s åä¿®æ”¹ message çš„æ•°æ®

  return(
    <div>
      {message}
    </div>
  )
}



// æœ€åéœ€è¦ export ä¸€ä¸‹ï¼
export default APP



